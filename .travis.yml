language: bash
services: docker
script: make test
deploy:
  provider: script
  script: docker run -e TWINE_USERNAME -e TWINE_PASSWORD --mount src="$(pwd)",target=/app,type=bind -w /app -it python bash -c "pip3 install twine && python3 setup.py sdist bdist_wheel && twine upload dist/*"
  on:
    tags: true
